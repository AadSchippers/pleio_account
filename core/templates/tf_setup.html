{% extends "base.html" %}
{% load i18n %}

{% block content %}
<form method="post" action=".">
    {% csrf_token %}
    {{ wizard.management_form }}
    <fieldset>
        <p>{% block title %}{% trans "Enable Two-Factor Authentication" %}{% endblock %}</p>
        {% if wizard.steps.current == 'welcome' %}
<!--
            wizard.steps.next
-->
            <p>{% blocktrans %}You are about to take your account security to the
             next level. Follow the steps in this wizard to enable two-factor
              authentication.{% endblocktrans %}</p>
        {% elif wizard.steps.current == 'generator' %}

            <p>{% blocktrans %}To start using a token generator, please use your
            smartphone to scan the QR code below. For example, use Google
            Authenticator. Then, enter the token generated by the app.
            {% endblocktrans %}</p>
            <p><img src="{{ QR_URL }}" alt="QR Code" /></p>

            <div class="input-field">
                {% include "two_factor/_wizard_forms.html" %}
<!--
                    {{ form.errors.otp_token }}
                    {{ wizard.form.otp_token }}


                <input autofocus="autofocus"
                       id="id_token-otp_token"
                       max="999999"
                       min="1"
                       name="token-otp_token"
                       type="number">
-->
            </div>

        {% else %}
            <p class="alert alert-warning" role="alert">{% blocktrans %}We've
            encountered an issue with the selected authentication method. Please
            go back and verify that you entered your information correctly, try
            again, or use a different authentication method instead. If the issue
            persists, contact the site administrator.{% endblocktrans %}</p>
      {% endif %}
    </fieldset>

    {% include "two_factor/_wizard_actions.html" %}
  </form>
{% endblock %}
